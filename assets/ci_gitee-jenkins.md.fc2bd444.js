import{_ as e,o as i,c as a,N as l}from"./chunks/framework.6be76822.js";const u=JSON.parse('{"title":"Gitee DevOps实战——打造自己的持续集成工作流","description":"","frontmatter":{},"headers":[],"relativePath":"ci/gitee-jenkins.md"}'),t={name:"ci/gitee-jenkins.md"},r=l(`<h1 id="gitee-devops实战——打造自己的持续集成工作流" tabindex="-1"><a href="https://www.bilibili.com/video/BV1ou411o7tf/?spm_id_from=333.880.my_history.page.click&amp;vd_source=5f1b28286ef933c34018acd35c67cc81" target="_blank" rel="noreferrer">Gitee DevOps实战——打造自己的持续集成工作流</a> <a class="header-anchor" href="#gitee-devops实战——打造自己的持续集成工作流" aria-label="Permalink to &quot;[Gitee DevOps实战——打造自己的持续集成工作流](https://www.bilibili.com/video/BV1ou411o7tf/?spm_id_from=333.880.my_history.page.click&amp;vd_source=5f1b28286ef933c34018acd35c67cc81)&quot;">​</a></h1><h2 id="一、持续集成简介" tabindex="-1">一、持续集成简介 <a class="header-anchor" href="#一、持续集成简介" aria-label="Permalink to &quot;一、持续集成简介&quot;">​</a></h2><h3 id="持续集成的概念" tabindex="-1">持续集成的概念 <a class="header-anchor" href="#持续集成的概念" aria-label="Permalink to &quot;持续集成的概念&quot;">​</a></h3><p>Cl（Continuous integration），是一种软件工程流程，是将所有软件工程师对于软件的工作副本持续集成到共享主线（mainline）的一种举措。</p><h3 id="持续集成的工作原理" tabindex="-1">持续集成的工作原理 <a class="header-anchor" href="#持续集成的工作原理" aria-label="Permalink to &quot;持续集成的工作原理&quot;">​</a></h3><p>采用持续集成时，开发人员可以使用诸如Gt之类的版本控制系统，将更新频繁提交到共享存储库中。在每次提交前，开发人员可以选择在集成前对其代码执行本地单元测试，作为额外的验证层。持续集成服务在新代码更改上自动构建和运行集成测试，以立即发现任何错误。同时，将集成后的全貌在测试环境中发布出来，以支撑更多测试内容及验收工作。</p><p><img src="https://cdn.jsdelivr.net/gh/Eadela/pic-go/img/202305161736856.png" alt="image-20230516173644779"></p><h3 id="持续集成的优势" tabindex="-1">持续集成的优势 <a class="header-anchor" href="#持续集成的优势" aria-label="Permalink to &quot;持续集成的优势&quot;">​</a></h3><ol><li>提高开发人员的工作效率</li></ol><p>持续集成可将开发人员从手动任务中解放出来，并且鼓励有助于减少发布到客户环境中的错误和缺陷数量的行为，从而提高团队的工作效率。</p><ol start="2"><li>更快发现并解决缺陷</li></ol><p>通过更频繁的测试，您的团队可以在缺陷稍后变成大问题前发现并解决这些缺陷。</p><ol start="3"><li>更快交付更新</li></ol><p>持续集成有助于您的团队更快、更频繁地向客户交付更新。</p><h2 id="二、打造自己的持续集成作业平台" tabindex="-1">二、打造自己的持续集成作业平台 <a class="header-anchor" href="#二、打造自己的持续集成作业平台" aria-label="Permalink to &quot;二、打造自己的持续集成作业平台&quot;">​</a></h2><h3 id="平台的构成" tabindex="-1">平台的构成 <a class="header-anchor" href="#平台的构成" aria-label="Permalink to &quot;平台的构成&quot;">​</a></h3><p><img src="https://cdn.jsdelivr.net/gh/Eadela/pic-go/img/202305161758000.png" alt="image-20230516175835115"></p><h3 id="平台的工作流程" tabindex="-1">平台的工作流程 <a class="header-anchor" href="#平台的工作流程" aria-label="Permalink to &quot;平台的工作流程&quot;">​</a></h3><p><img src="https://cdn.jsdelivr.net/gh/Eadela/pic-go/img/202305161804651.png" alt="image-20230516180353251"></p><ol><li><p>工程师以PR方式提交代码到gitee仓库，</p></li><li><p>触发webhooks，发送请求到jenkins服务上，拉仓库</p></li><li><p>pipeline执行流水线任务</p><pre><code> build docker image、自动化测试等
</code></pre></li><li><p>存储镜像到Harbor</p></li><li><p>helm部署到测试环境Kubernetes</p></li><li><p>向外暴露请求入口，通过coreDNS解析，可以访问页面、自动化测试报告</p></li><li><p>测试、PM验收</p></li></ol><h4 id="agent执行任务" tabindex="-1">agent执行任务 <a class="header-anchor" href="#agent执行任务" aria-label="Permalink to &quot;agent执行任务&quot;">​</a></h4><ul><li>build <ul><li>发送构建评论</li><li>构建镜像，发送镜像到Harbor</li></ul></li><li>deploy <ul><li>helm卸载上次部署的pod</li><li>k8s删除上次部署的pod</li><li>k8s部署新的pod</li><li>发送部署评论</li></ul></li><li>test <ul><li>执行自动化测试</li><li>发送测试评论，包含测试报告和服务入口</li></ul></li><li>delete <ul><li>helm卸载pod</li><li>k8s删除pod</li><li>发送合并代码，closed评论</li></ul></li></ul><h3 id="搭建一个c平台" tabindex="-1">搭建一个C平台 <a class="header-anchor" href="#搭建一个c平台" aria-label="Permalink to &quot;搭建一个C平台&quot;">​</a></h3><ol><li>搭建私有DNS服务器，用于解析自定义域名：<a href="https://gitee.com/oscstudio/coredns-installer" target="_blank" rel="noreferrer">https://gitee.com/oscstudio/coredns-installer</a></li><li>搭建Harbor用于保存每次构建的容器镜像：<a href="https://gitee.com/oscstudio/simple-harbor" target="_blank" rel="noreferrer">https://gitee.com/oscstudio/simple-harbor</a></li><li>搭建Jenkins用于执行构建：<a href="https://gitee.com/oscstudio/simple-jenkins" target="_blank" rel="noreferrer">https://gitee.com/oscstudio/simple-jenkins</a></li><li>搭建Kubernetes用于部署集成测试环境：https:/gitee.com/atompi/install-single-master-K8s</li></ol><p>接下来，用Gitee把这些串起来</p><h2 id="三、如何用gitee玩转持续集成" tabindex="-1">三、如何用Gitee玩转持续集成 <a class="header-anchor" href="#三、如何用gitee玩转持续集成" aria-label="Permalink to &quot;三、如何用Gitee玩转持续集成&quot;">​</a></h2><p><img src="https://cdn.jsdelivr.net/gh/Eadela/pic-go/img/202305161920885.png" alt="image-20230516192045651"></p><p><img src="https://cdn.jsdelivr.net/gh/Eadela/pic-go/img/202305161923095.png" alt="image-20230516192305807"></p><p><img src="https://cdn.jsdelivr.net/gh/Eadela/pic-go/img/202305161925347.png" alt="image-20230516192506153"></p><p><img src="https://cdn.jsdelivr.net/gh/Eadela/pic-go/img/202305161938327.png" alt="image-20230516192608933"></p><p><img src="https://cdn.jsdelivr.net/gh/Eadela/pic-go/img/202305161938845.png" alt="image-20230516192725479"></p>`,31),o=[r];function s(n,p,c,d,h,g){return i(),a("div",null,o)}const b=e(t,[["render",s]]);export{u as __pageData,b as default};
